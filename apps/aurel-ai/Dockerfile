# This file is generated by Nx.
#
# Build the docker image with `npx nx docker-build aurel-ai`.
# Tip: Modify "docker-build" options in project.json to change docker build args.
#
# Run the container with `docker run -p 4200:4200 -t aurel-ai`.
# Use NGINX Alpine image as the base image
FROM nginx:alpine

# Add a non-root user to run NGINX securely
RUN addgroup --system aurel-ai && \
    adduser --system -G aurel-ai aurel-ai

# Set the working directory inside the container
WORKDIR /usr/share/nginx/html

# Copy built frontend assets from local dist directory to NGINX web server
COPY dist/apps/aurel-ai/browser .

# Set proper ownership and permissions for the copied files
RUN chown -R aurel-ai:aurel-ai .

# Expose port 4200 for NGINX web server
EXPOSE 4200

# Command to start NGINX web server
CMD ["nginx", "-g", "daemon off;"]
# CMD ["ng", "serve", "--host=0.0.0.0"]
